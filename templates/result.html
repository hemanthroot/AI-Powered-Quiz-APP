<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Result</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI', sans-serif;
}

.container{
    max-width:1000px;
    margin:40px auto;
    background:#d1e09f;
    padding:30px;
    border-radius:10px;
    box-shadow:0 15px 30px rgba(0,0,0,0.3);
}

h2{
    text-align:center;
    color:#243B55;
}

.score-box{
    text-align:center;
    background:#f1f5f9;
    padding:20px;
    border-radius:8px;
    margin-bottom:25px;
}

.score{
    font-size:32px;
    font-weight:bold;
    color:#16a34a;
}

.question-box{
    margin-bottom:20px;
    padding:15px;
    border-radius:8px;
    background:#f8fafc;
}

.correct{
    color:#16a34a;
    font-weight:bold;
}

.wrong{
    color:#dc2626;
    font-weight:bold;
}

.explanation{
    background:#fff7ed;
    border-left:5px solid #f97316;
    padding:10px;
    margin-top:10px;
    border-radius:5px;
    display:none;
}

.btn{
    display:block;
    width:100%;
    padding:14px;
    margin-top:20px;
    background:#243B55;
    color:white;
    border:none;
    border-radius:8px;
    font-size:18px;
    cursor:pointer;
}

.btn:hover{
    background:#141E30;
}
</style>
</head>

<body>

<div class="container">

<h2>ðŸ“Š Quiz Result</h2>

<div class="score-box">
    <p>Your Score</p>
    <div class="score">{{ score }} / {{ total }}</div>
</div>

{% for r in results %}
<div class="question-box">
    <p><b>{{ loop.index }}. Question</b></p>

    {% if r.is_correct %}
        <p class="correct">âœ” Correct Answer</p>
    {% else %}
        <p class="wrong">âœ˜ Wrong Answer</p>
        <p><b>Your Answer:</b> {{ r.user_answer }}</p>
        <p><b>Correct Answer:</b> {{ r.correct_answer }}</p>

        <button onclick="toggleExp('{{ loop.index }}')">Show Explanation</button>

        <div class="explanation" id="exp{{ loop.index }}">
            <b>AI Explanation:</b><br>
            {{ r.explanation }}
        </div>
    {% endif %}
</div>
{% endfor %}

<a href="/">
    <button class="btn">Try Another Quiz</button>
</a>

</div>

<script>
function toggleExp(id){
    let exp = document.getElementById("exp"+id);
    exp.style.display = exp.style.display === "none" ? "block" : "none";
}
</script>

</body>
</html>